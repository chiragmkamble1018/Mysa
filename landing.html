<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mysa — Where Mind Meets the Future</title>
    <meta name="description" content="Mysa is your future-forward AI Companion for mental wellness. Emotion-aware, insightful, and always available.">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>

    <style>
    /* CSS Custom Properties (Deep Forest / Emerald Glow Theme) */
    :root {
        /* Backgrounds */
        --color-bg-dark: #1A201A;/* Deep Forest Green (Dark Background) */
        --color-bg-light: #F0FFF0;/* Honeydew (Light Text/Card Base) */

        /* Text */
        --color-text-primary: #1A201A;/* Dark text for cards */
        --color-text-secondary: #888888;/* soft-gray-text */

        /* Accents */
        --color-accent-teal: #6ECB63;/* Vibrant Emerald (Primary Accent) */
        --color-accent-violet: #3D8361;/* Deep Forest Green (Secondary Accent / CTA) */

        /* Glass / Surfaces - SOLID Colors */
        --color-glass-border: #D0CCC7; /* Light gray solid border */
        --color-glass-fill: #FFFFFF; /* Solid white fill */

        /* Focus / Interaction */
        --color-focus-ring: #90EE90;/* Pale Green Focus */

        /* Typography & Layout */
        --font-primary: 'Poppins', sans-serif;
        --max-width: 1200px;
        --spacing-unit: 1.5rem;
        --border-radius: 12px;

        /* Alerts / Danger */
        --color-danger: #E53935;/* crisis-red */
    }

    /* Base & Global Styles */
    html { scroll-behavior: smooth; }
    body {
        font-family: var(--font-primary);
        background-color: var(--color-bg-dark);
        color: var(--color-bg-light); /* Light text on dark background */
        margin: 0;
        overflow-x: hidden;
        line-height: 1.6;
    }

    h1, h2, h3 {
        font-family: var(--font-primary);
        line-height: 1.2;
        /* Default headings should be light on this dark background */
        color: var(--color-bg-light);
    }
    
    /* Utility Classes */
    .container {
        max-width: var(--max-width);
        margin: 0 auto;
        padding: 0 var(--spacing-unit);
    }
    .text-gradient {
        background: linear-gradient(45deg, var(--color-accent-teal), var(--color-accent-violet));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        color: transparent; /* Fallback for older browsers */
    }
    
    /* MODIFIED: Class to make text fully opaque and dark/bold */
    .text-opaque-primary {
        color: var(--color-text-primary) !important; 
        -webkit-text-fill-color: var(--color-text-primary) !important;
        opacity: 1 !important;
        font-weight: 700; 
        /* REMOVED: All text shadows for a clean, opaque look */
        text-shadow: none; 
    }

    /* Glassmorphic Card Style -> Now Solid Card Style */
    .glass-card {
        /* CHANGED: Uses solid white background and light border */
        background-color: var(--color-glass-fill);
        border: 1px solid var(--color-glass-border);
        border-radius: var(--border-radius);
        /* Adjusted shadow for a standard solid card on a dark background */
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); 
        transition: transform 0.3s, box-shadow 0.3s;
    }
    
    /* Button Style */
    .btn {
        padding: 1rem 2.5rem;
        border-radius: 9999px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease-out;
        border: none;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    .btn-primary {
        background-color: var(--color-accent-violet); 
        color: var(--color-bg-light); 
        box-shadow: 0 0 15px var(--color-accent-violet);
    }
    .btn-primary:hover {
        transform: translateY(-2px) scale(1.03);
        /* UPDATED SHADOW: Changed rgba to use the new accent-violet color (#3D8361) */
        box-shadow: 0 0 25px var(--color-accent-violet), 0 0 40px rgba(61, 131, 97, 0.4); 
    }
    .btn-secondary {
        background: none;
        color: var(--color-accent-teal); 
        border: 1px solid var(--color-accent-teal);
    }
    .btn:focus-visible {
        outline: 2px solid var(--color-focus-ring);
        outline-offset: 2px;
    }
    .mr-4 { margin-right: 1rem; }
    .ml-2 { margin-left: 0.5rem; }

    /* --- Layout & Structure --- */

    /* WebGL Background Canvas */
    #webgl-canvas-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: 0;
        opacity: 0.5; 
        transition: opacity 0.5s;
    }

    /* Main Content Layer */
    #main-content {
        position: relative;
        z-index: 10;
    }
    
    /* Hero Section */
    #hero {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 0 var(--spacing-unit);
        position: relative;
    }
    .hero-text-block { max-width: 800px; }
    
    #hero h1 { 
        font-size: clamp(3rem, 6vw, 5.5rem); 
        font-weight: 700; 
        margin-bottom: 0.5rem; 
        opacity: 0; 
        color: var(--color-bg-light); 
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.2); 
    }
    #hero p { 
        font-size: clamp(1rem, 2.5vw, 1.5rem); 
        color: var(--color-bg-light); 
        margin-bottom: 2rem; 
        opacity: 0; 
    }
    #hero .cta-group { opacity: 0; }
    
/* --- Floating 3D Text --- */
#mysa-floating-text {
    font-family: var(--font-primary);
    font-size: clamp(5rem, 15vw, 15rem); 
    font-weight: 700;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 5; 
    opacity: 1; /* CHANGED: Set to fully opaque (no transparency) */
    pointer-events: none; 
    
    /* Gradient and Glow - CHANGED TO SUN BRIGHT COLORS */
    background: linear-gradient(45deg, #FFD700, #FF8C00); /* Bright Yellow to Dark Orange */
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
    /* ADDED: Strong, bright sun glow effect */
    text-shadow: 0 0 20px #FF8C00; 

    /* 3D Rotation */
    animation: rotateY 30s linear infinite;
    will-change: transform;
}

@keyframes rotateY {
    from { transform: translate(-50%, -50%) rotateY(0deg); }
    to { transform: translate(-50%, -50%) rotateY(360deg); }
}
    
    /* --- Fixed Home Button --- */
    #fixed-home-btn {
        position: fixed;
        bottom: var(--spacing-unit);
        right: var(--spacing-unit);
        z-index: 100;
        opacity: 0; 
        box-shadow: 0 0 20px var(--color-accent-violet); 
        padding: 1rem 1.5rem;
        font-size: 1rem;
    }

    /* Section Styling */
    section {
        padding: 8rem 0;
        position: relative;
    }
    section h2 { 
        font-size: 3rem; 
        font-weight: 700; 
        margin-bottom: 3rem; 
        text-align: center; 
        color: var(--color-bg-light); 
    }
    
    /* Features Grid */
    #features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--spacing-unit);
    }

    .feature-card {
        padding: 2rem;
        text-align: left;
    }
    .feature-card i {
        font-size: 2rem;
        color: var(--color-accent-teal);
        margin-bottom: 1rem;
        display: block;
    }
    .feature-card h3 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }
    .feature-card:hover {
        transform: translateY(-8px);
        /* UPDATED SHADOW: Changed rgba to use the new accent-teal color (#6ECB63) */
        box-shadow: 0 10px 40px rgba(110, 203, 99, 0.3); 
        cursor: default;
    }
    
    /* AI Showcase */
    #ai-showcase-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    #ai-showcase-content p {
        color: var(--color-bg-light);
    }
    #ai-sphere-container {
        width: 300px;
        height: 300px;
        margin-bottom: 2rem;
        opacity: 0; 
    }
    
    /* Responsive Adjustments */
    @media (max-width: 768px) {
        section { padding: 4rem 0; }
        section h2 { font-size: 2.2rem; }
        .btn { padding: 0.8rem 2rem; font-size: 0.9rem; }
        #ai-sphere-container { width: 200px; height: 200px; }
        
        .responsive-break {
            display: block;
        }
    }
    
    .responsive-break {
        display: none;
    }
    
    /* Reduce Motion Mode */
    @media (prefers-reduced-motion: reduce) {
        .gsap-animated {
            transition: none !important;
        }
        #webgl-canvas-container {
            display: none; 
            opacity: 1 !important;
        }
        body {
            background-color: var(--color-bg-dark); 
        }
        #mysa-floating-text {
            animation: none !important;
            opacity: 0;
        }
        /* Ensure text is light on the dark background for accessibility */
        #hero h1, #hero p, section h2, #ai-showcase-content p {
             color: var(--color-bg-light) !important;
             text-shadow: none !important;
        }
    }
</style>

</head>
<body>

    <div id="webgl-canvas-container"></div>

    <div id="main-content">
        
        <section id="hero" class="gsap-animated">
            <div id="mysa-floating-text" class="gsap-animated">MYSA</div>
            
            <div class="hero-text-block">
                <h1 class="gsap-hero-title">
                    <span class="text-opaque-primary">Mysa</span> <br class="responsive-break">— Where Mind Meets the <span class="text-gradient">Future</span>
                </h1>
                <p class="gsap-hero-subtitle">
                    Your future-forward AI Companion for mental wellness. Emotion-aware, insightful, and always available.
                </p>
                <div class="cta-group">
                    <!-- The CTA button directs the user to the main application page -->
                    <a href="index.html" class="btn btn-primary mr-4" role="button">
                        Start Chatting 
                        <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                    <!-- The Explore button uses an anchor link for smooth scrolling -->
                    <a href="#features" class="btn btn-secondary" role="button">
                        Explore Features
                    </a>
                </div>
            </div>
        </section>

        <a href="#hero" id="fixed-home-btn" class="btn btn-primary" role="button" aria-label="Go back to the top of the page">
            <i class="fas fa-home mr-2"></i> Home
        </a>
        
        <section id="features" class="container">
            <h2 class="gsap-section-title">A Comprehensive Toolkit for Wellness</h2>
            <div id="features-grid" class="gsap-features-grid">
                
                <div class="feature-card glass-card">
                    <i class="fas fa-robot"></i>
                    <h3>AI Companion</h3>
                    <p>Emotion-aware voice and text chat to help you process feelings and explore coping strategies.</p>
                </div>
                
                <div class="feature-card glass-card">
                    <i class="fas fa-heartbeat"></i>
                    <h3>Continuous Mood Tracking</h3>
                    <p>Log daily emotional states and let Mysa monitor trends, offering personalized advice and insights.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Risk & Safety Detection</h3>
                    <p>Always monitoring for signs of distress, ensuring immediate access to professional resources when needed.</p>
                </div>

                <div class="feature-card glass-card">
                    <i class="fas fa-book-open"></i>
                    <h3>Personal Diary</h3>
                    <p>A private, secure space for uncensored reflection and long-form journaling.</p>
                </div>
                
                <div class="feature-card glass-card">
                    <i class="fas fa-puzzle-piece"></i>
                    <h3>Relaxation Games</h3>
                    <p>Interactive exercises and games designed to calm anxiety and promote mindfulness.</p>
                </div>
                
                <div class="feature-card glass-card">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Daily Routine Planner</h3>
                    <p>Structure your day with ease to build positive habits and reduce decision fatigue.</p>
                </div>

            </div>
        </section>

        <section id="ai-tech" class="container">
            <h2 class="gsap-section-title">The Technology Behind Mysa</h2>
            <div id="ai-showcase-content">
                <div id="ai-sphere-container">
                    <!-- 3D AI Sphere visualization is rendered here by Three.js -->
                </div>
                <p>
                    Mysa utilizes state-of-the-art **Generative AI** and **Natural Language Processing (NLP)** to provide human-like empathy and actionable guidance. It is designed to be an ever-learning, safe companion that adapts to your unique emotional needs.
                </p>
                <a href="#hero" class="btn btn-secondary mt-6" role="button">
                    See How It Works
                </a>
            </div>
        </section>

        <footer class="text-center py-8">
            <p class="text-sm opacity-70">&copy; 2025 Mysa Wellness. Your journey to calm starts now.</p>
        </footer>
        
    </div>

   <script type="module">
if (typeof gsap !== 'undefined') {
    gsap.registerPlugin(ScrollTrigger);
}

const config = {
    prefersReducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,
    webglAvailable: true,
    numParticles: 400,
    rotationAngle: Math.PI * 2, // full rotation
    zoomDistance: 5, // camera zoom in/out
    // CORRECTED: Set the delay to 6000ms (6 seconds) as requested.
    REDIRECT_DELAY: 6000 
};

let scene, camera, renderer, particles, links;
let container = document.getElementById('webgl-canvas-container');
let sphereContainer = document.getElementById('ai-sphere-container');

let colorTeal, colorViolet;
let aiSphereMesh;

// --- 3D Scene Initialization ---
function initThreeJS() {
    if (config.prefersReducedMotion) {
        document.body.style.backgroundColor = 'var(--color-bg-light)';
        config.webglAvailable = false;
        return;
    }

    try {
        // Scene and Camera
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 10;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth, window.innerHeight);
        container.appendChild(renderer.domElement);

        // Colors
        colorTeal = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--color-accent-teal').trim());
        colorViolet = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--color-accent-violet').trim());

        // Particles
        const geometry = new THREE.BufferGeometry();
        const positions = new Float32Array(config.numParticles * 3);
        const colors = new Float32Array(config.numParticles * 3);
        const tempColor = new THREE.Color();

        for (let i = 0; i < config.numParticles; i++) {
            const radius = 8;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(Math.random() * 2 - 1);

            positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
            positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
            positions[i * 3 + 2] = radius * Math.cos(phi);

            tempColor.copy(colorTeal);
            tempColor.lerp(colorViolet, Math.random());
            colors[i * 3] = tempColor.r;
            colors[i * 3 + 1] = tempColor.g;
            colors[i * 3 + 2] = tempColor.b;
        }
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const material = new THREE.PointsMaterial({
            size: 0.1,
            vertexColors: true,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending,
            sizeAttenuation: true
        });

        particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // Links (Optional)
        links = new THREE.LineSegments(new THREE.BufferGeometry(), new THREE.LineBasicMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.15,
            blending: THREE.AdditiveBlending
        }));
        scene.add(links);

        window.addEventListener('resize', onWindowResize);

        // AI Sphere
        initAISphere();

        // Animate Once: rotate + zoom
        animateOnce();

    } catch (e) {
        console.error("WebGL initialization failed:", e);
        config.webglAvailable = false;
        container.style.display = 'none';
        document.body.style.backgroundColor = 'var(--color-bg-light)';
    }
}

function initAISphere() {
    const sphereGeometry = new THREE.IcosahedronGeometry(1.5, 1);
    const shaderMaterial = new THREE.MeshPhongMaterial({
        color: colorTeal,
        emissive: colorViolet,
        emissiveIntensity: 0.5,
        shininess: 100,
        specular: 0xC75C3E,
        wireframe: true,
        transparent: true,
        opacity: 0.8
    });

    aiSphereMesh = new THREE.Mesh(sphereGeometry, shaderMaterial);
    aiSphereMesh.position.set(0, 0, 0);
    aiSphereMesh.scale.set(0, 0, 0);
    scene.add(aiSphereMesh);

    const pointLight = new THREE.PointLight(0xffffff, 2, 100);
    pointLight.position.set(5, 5, 5);
    scene.add(pointLight);

    const ambientLight = new THREE.AmbientLight(0x404040, 3);
    scene.add(ambientLight);
}

// --- Render loop (Original Logic) ---
function animate() {
    requestAnimationFrame(animate);
    if (particles) {
        particles.rotation.x += 0.0005;
        particles.rotation.y += 0.0005;
    }
    
    // AI Sphere rotation (Original Logic)
    if (aiSphereMesh) {
        aiSphereMesh.rotation.x += 0.005;
        aiSphereMesh.rotation.y += 0.005;
    }
    
    renderer.render(scene, camera);
}

// --- Event Handler ---
function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

// --- Animate Once (Original Logic) ---
function animateOnce() {
    const tl = gsap.timeline({ onUpdate: () => renderer.render(scene, camera) });
    
    // Rotate full 360
    tl.to(particles.rotation, { duration: 3, y: config.rotationAngle, ease: "power2.inOut" });

    // Zoom in and out
    tl.to(camera.position, { duration: 1.5, z: camera.position.z - config.zoomDistance, ease: "power2.inOut" }, 0);
    tl.to(camera.position, { duration: 1.5, z: camera.position.z + config.zoomDistance, ease: "power2.inOut" }, 1.5);

    // Scale AI Sphere in
    if (aiSphereMesh) {
        tl.to(aiSphereMesh.scale, { duration: 1.5, x: 1, y: 1, z: 1, ease: "back.out(1.7)" }, "-=2");
    }
}

// --- GSAP Hero & Scroll Animations (Original Logic) ---
function initGSAPAnimations() {
    if (config.prefersReducedMotion || typeof gsap === 'undefined') return;

    const heroTL = gsap.timeline();
    heroTL
        .from(".gsap-hero-title", { duration: 1.2, y: 50, opacity: 0, ease: "power3.out" })
        .from(".hero-text-block p", { duration: 1, y: 30, opacity: 0, ease: "power2.out" }, "-=0.8")
        .from(".cta-group", { duration: 0.8, opacity: 0, scale: 0.9, ease: "back.out(1.7)" }, "-=0.5");

    const reveals = gsap.utils.toArray("#features h2, #ai-tech h2, #features-grid > *, #ai-showcase-content > p, #ai-showcase-content > .btn");
    reveals.forEach(el => {
        gsap.from(el, {
            scrollTrigger: { trigger: el, start: "top 85%", toggleActions: "play none none none" },
            duration: 1.2,
            y: 50,
            opacity: 0,
            ease: "power3.out",
            stagger: 0.1
        });
    });

    gsap.fromTo("#fixed-home-btn", { duration: 0.8, y: 20, opacity: 0 }, { duration: 0.8, opacity: 1, y: 0, ease: "power2.out", delay: 1.5 });
    
    // Link AI sphere to scroll
    gsap.to(aiSphereMesh.rotation, {
        scrollTrigger: {
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            scrub: 1.5,
        },
        y: Math.PI * 4,
        x: Math.PI * 2,
        z: Math.PI * 1,
    });
    
    gsap.to(particles.rotation, {
        scrollTrigger: {
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            scrub: 1,
        },
        y: Math.PI * 0.5,
    });
}

// --- Implementation Logic: Redirect Timer ---
function initRedirect(delay = config.REDIRECT_DELAY) {
    const loadingBar = document.getElementById('loading-bar');
    const loadingFill = document.createElement('div');
    loadingFill.id = 'loading-fill';
    // Check if loading bar element exists (only appears on loader screen version)
    if(loadingBar) {
        loadingBar.appendChild(loadingFill);
    
        // Start the visual loading fill
        loadingFill.style.transitionDuration = `${delay / 1000}s`;
        loadingFill.style.width = '100%';
    }

    // Redirect after delay
    setTimeout(() => {
        // Ensure the scroll position is reset before redirecting to the functional page
        window.scrollTo(0, 0); 
        window.location.href = 'index.html'; // Redirect to the main app page
    }, delay);
    
    // Hide all scrollable content while loading
    document.body.style.overflowY = 'hidden';
    const fixedHomeBtn = document.getElementById('fixed-home-btn');
    if (fixedHomeBtn) fixedHomeBtn.style.display = 'none';

    // IMPORTANT FIX: The floating text is part of main-content. We want it to stay visible.
    // We only fade out the background canvas's visual impact, then redirect.
    // Removing the full opacity: 0 fade, and setting opacity transition for a smoother exit.
    document.getElementById('main-content').style.transition = 'opacity 0.5s'; 
    document.getElementById('main-content').style.opacity = '1';

    // Final fade out before redirect
    setTimeout(() => {
        document.getElementById('main-content').style.opacity = '0';
        document.getElementById('webgl-canvas-container').style.opacity = '0';
    }, delay - 500); // Start fade-out slightly before redirect


    // Clean up visibility after redirect
    setTimeout(() => {
        document.body.style.overflowY = 'auto';
        document.getElementById('main-content').style.opacity = '1';
    }, delay);
}


// --- Main Execution ---
window.addEventListener('load', () => {
    initThreeJS();
    initGSAPAnimations();
    // This calls the loader function which automatically redirects after the animation completes
    initRedirect(config.REDIRECT_DELAY); 
});
</script>
</body>
</html>
